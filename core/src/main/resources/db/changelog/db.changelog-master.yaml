databaseChangeLog:
  - logicalFilePath: db/changelog/db.changelog-master.yaml
  - changeSet:
      id: 1
      author: shushkevich
      changes:
        - sql:
            endDeterminer: /nGO
            sql: create type user_role as enum('SYS_ADMIN', 'ADMIN', 'DISPATCHER', 'MANAGER', 'DRIVER', 'COMPANY_OWNER')

  - changeSet:
      id: 2
      author: shushkevich
      changes:
        createTable:
          tableName: users
          columns:
            - column:
                name: id
                type: int
                autoIncrement: true
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: name
                type: varchar(20)
            - column:
                name: surname
                type: varchar(20)
                constraints:
                  nullable: false
            - column:
                name: patronymic
                type: varchar(20)
            - column:
                name: client_id
                type: int
            - column:
                name: born_date
                type: date
            - column:
                name: email
                type: varchar(50)
                constraints:
                  unique: true
                  nullable: false
            - column:
                name: town
                type: varchar(20)
            - column:
                name: street
                type: varchar(20)
            - column:
                name: house
                type: varchar(5)
            - column:
                name: flat
                type: varchar(5)
            - column:
                name: login
                type: varchar(15)
                constraints:
                  unique: true
                  nullable: false
            - column:
                name: password
                type: varchar(72)
                constraints:
                  nullable: false
            - column:
                name: passport_number
                type: varchar(30)
            - column:
                name: passport_issued_by
                type: varchar(50)
            - column:
                name: roles
                type: user_role[]
                constraints:
                  nullable: false

  - changeSet:
      id: 3
      author: your_liquibase_username
      comment: "Create admin user"
      changes:
        - insert:
            tableName: users
            columns:
              - column:
                  name: name
                  value: "admin"
              - column:
                  name: surname
                  value: "admin"
              - column:
                  name: email
                  value: "admin@server.com"
              - column:
                  name: login
                  value: "admin"
              - column:
                  name: password
                  value: "admin"
              - column:
                  name: roles
                  value: "{SYS_ADMIN}"